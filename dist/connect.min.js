!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).cc={})}(this,function(e){"use strict";const t=new Map,o=new Map,n="cc:";function r(e){switch(e){case"session":return"undefined"!=typeof sessionStorage?sessionStorage:null;case"local":return"undefined"!=typeof localStorage?localStorage:null;default:return null}}function s(e){return void 0!==e.expiry&&Date.now()>e.expiry}const c={get(e){const t=o.get(e);if(t)return s(t)?void this.delete(e):t.value;for(const t of["session","local"]){const o=r(t);if(!o)continue;const c=o.getItem(`${n}${e}`);if(c)try{const t=JSON.parse(c);if(s(t)){o.removeItem(`${n}${e}`);continue}return t.value}catch{o.removeItem(`${n}${e}`)}}},set(e,s,c={}){const{persistence:i="window",expiry:a}=c,l=this.get(e),u={value:s,persistence:i,expiry:a?Date.now()+a:void 0},d=r(i);d?d.setItem(`${n}${e}`,JSON.stringify(u)):o.set(e,u);const f=t.get(e);f&&f.forEach(t=>{try{t(s,l)}catch(t){console.error(`Error in state subscriber for "${e}":`,t)}})},has(e){return void 0!==this.get(e)},delete(e){const s=this.get(e);o.delete(e);const c=r("session"),i=r("local");c?.removeItem(`${n}${e}`),i?.removeItem(`${n}${e}`);const a=t.get(e);a&&void 0!==s&&a.forEach(t=>{try{t(void 0,s)}catch(t){console.error(`Error in state subscriber for "${e}":`,t)}})},subscribe(e,o){t.has(e)||t.set(e,new Set),t.get(e).add(o)},unsubscribe(e,o){t.get(e)?.delete(o)},clear(){o.clear();for(const e of["session","local"]){const t=r(e);if(!t)continue;const o=[];for(let e=0;e<t.length;e++){const r=t.key(e);r?.startsWith(n)&&o.push(r)}o.forEach(e=>t.removeItem(e))}t.clear()}},i=new Map,a={emit(e,t){const o=i.get(e);o&&o.forEach(o=>{try{o(t)}catch(t){console.error(`Error in event handler for "${e}":`,t)}})},on(e,t){i.has(e)||i.set(e,new Set),i.get(e).add(t)},off(e,t){i.get(e)?.delete(t)},once(e,t){const o=n=>{this.off(e,o),t(n)};this.on(e,o)},clear(e){e?i.delete(e):i.clear()}};let l={env:"production",page:{},site:{},features:{}};const u={init(e){l={...l,...e}},get(e){return e in l&&!e.includes(".")?l[e]:(t=l,e.split(".").reduce((e,t)=>{if(e&&"object"==typeof e&&t in e)return e[t]},t));var t},has(e){const t=this.get(e);return null!=t&&!1!==t},set(e,t){if(!e.includes("."))return void(l[e]=t);const o=e.split("."),n=o.pop();let r=l;for(const e of o)e in r&&"object"==typeof r[e]||(r[e]={}),r=r[e];r[n]=t},getAll:()=>({...l})},d={async api(e,t="GET",o={}){const{body:n,timeout:r=3e4,headers:s={},...c}=o,i=new AbortController,a=setTimeout(()=>i.abort(),r);try{const o={method:t,headers:{"Content-Type":"application/json",...s},signal:i.signal,...c};void 0!==n&&"GET"!==t&&(o.body=JSON.stringify(n));const r=await fetch(e,o);let l;clearTimeout(a);const u=r.headers.get("content-type");return l=u?.includes("application/json")?await r.json():await r.text(),{data:l,status:r.status,ok:r.ok}}catch(e){if(clearTimeout(a),e instanceof Error&&"AbortError"===e.name)throw new Error(`Request timeout after ${r}ms`);throw e}},focus(e){const t=document.querySelector(e);return!!t&&(t.focus(),!0)},scroll(e,t){const o=document.querySelector(e);return!!o&&(o.scrollIntoView(t??{behavior:"smooth"}),!0)},delay:e=>new Promise(t=>setTimeout(t,e)),async copyToClipboard(e){try{return await navigator.clipboard.writeText(e),!0}catch{const t=document.createElement("textarea");t.value=e,t.style.position="fixed",t.style.opacity="0",document.body.appendChild(t),t.select();try{return document.execCommand("copy"),!0}catch{return!1}finally{document.body.removeChild(t)}}},async readClipboard(){try{return await navigator.clipboard.readText()}catch{return null}},dispatchEvent(e,t,o){const n=document.querySelector(e);return!!n&&(n.dispatchEvent(new CustomEvent(t,{detail:o,bubbles:!0,composed:!0})),!0)}},f={state:c,events:a,meta:u,actions:d};"undefined"!=typeof window&&(window.cc=f),e.actions=d,e.cc=f,e.default=f,e.events=a,e.meta=u,e.state=c,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=connect.min.js.map
